# 跨公共牌四维度胜率-策略验证实验报告 V3

## 实验改进

**本版本使用 OMPEval (C++) 计算范围胜率，速度比 poker-odds-calc 快约60倍。**
**新增：每100组实验随机生成一次OOP和IP范围，增加实验多样性。**

## 实验目的

验证：**在不同的（公共牌+固定手牌+随机范围）组合下：**
当以下四个条件同时满足时，策略是否相同？
1. 固定手牌vs对手范围的胜率相近（差异<0.05%）
2. 固定手牌vs对手范围的平局率相近（差异<0.05%）
3. 自己范围vs对手范围的胜率相近（差异<0.05%）
4. 自己范围vs对手范围的平局率相近（差异<0.05%）

## Solver 参数

| 参数 | 值 |
|------|-----|
| 起始底池 | 100 |
| 有效筹码 | 500 |
| 下注尺寸 | 50% pot |
| 加注尺寸 | 100% pot |
| 目标可剥削度 | 0.1% |
| 最大迭代次数 | 1000 |

## 范围策略

- **范围刷新间隔**: 每100组实验随机生成一次
- **OOP范围大小**: 60-120种手牌
- **IP范围大小**: 40-100种手牌
- **使用的范围组数**: 100

## 实验规模

- 生成场景数: 6352
- 四维度胜率相近的场景对（差异<0.05%）: 5
- 策略差异显著(>15%)的场景对: 1

## 关键发现

### ⚠️ 四维度胜率标量不足以决定最优策略

在 5 对四维度胜率相近的场景中，有 1 对（20.0%）的策略差异显著。

**结论：即使手牌胜率、手牌平局率、范围胜率、范围平局率都精确匹配（差异<0.05%），最优策略仍然可能完全不同。**

### 策略差异显著的反例

---

#### 反例 1

**场景1:**
- 公共牌: `Kd Td 2s 6c 4h`
- OOP手牌: `2c2h`
- OOP范围: 107种手牌
- IP范围: 64种手牌
- 手牌: 胜率=98.182%, 平局率=0.000%
- 范围: 胜率=49.512%, 平局率=0.716%
- EV: 154.72, Solver Equity: 98.18%
- 动作EV: Check:154.72, Bet:151.13
- 加权EV: 154.72
- 策略: `{"Check":1,"Bet":0}`

**场景2:**
- 公共牌: `9s 8h 4s 2c 6h`
- OOP手牌: `9d9h`
- OOP范围: 116种手牌
- IP范围: 42种手牌
- 手牌: 胜率=98.157%, 平局率=0.000%
- 范围: 胜率=49.476%, 平局率=0.759%
- EV: 145.79, Solver Equity: 98.16%
- 动作EV: Check:144.88, Bet:145.80
- 加权EV: 145.79
- 策略: `{"Check":0.015998,"Bet":0.984002}`

**对比:**
- 范围相同: 否
- 手牌胜率差异: 0.025%, 手牌平局率差异: 0.000%
- 范围胜率差异: 0.036%, 范围平局率差异: 0.043%
- **策略差异: 98.4%**
- **加权EV差异: 8.93**

