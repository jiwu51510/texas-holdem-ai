Debugger listening on ws://127.0.0.1:62451/834eb1e9-7b29-4922-a991-2a70188d893b
For help, see: https://nodejs.org/en/docs/inspector
Debugger attached.
================================================================================
使用 wasm-postflop + OMPEval 进行跨公共牌四维度胜率-策略验证实验 V3
================================================================================

核心改进: 使用 OMPEval (C++) 计算范围胜率，速度比 poker-odds-calc 快约60倍

核心问题: 在不同的（公共牌+固定手牌）组合下：
  当手牌胜率和范围胜率都相近时，策略是否相同？

范围定义:
  OOP: AA-22,AKs-A2s,KQs-K2s,QJs-Q2s,JTs-J6s,T9s-T6s,98s-96s,87s-86s,76s-75s,65s-64s,54s,AKo-A2o,KQo-K9o,QJo-Q9o,JTo-J9o,T9o
  IP: AA-22,AKs-A2s,KQs-K9s,QJs-Q9s,JTs-J9s,T9s,98s,87s,76s,65s,AKo-ATo,KQo-KJo,QJo

生成 10000 个（公共牌+固定手牌）场景...
使用 OMPEval 计算胜率，预计总时间约 10-15 分钟

进度: 1/10000 - 已用时: 0s - 预计剩余: 9999s
using deprecated parameters for `initSync()`; pass a single object instead
  场景 1: Jc 9d 5c Ts Tc + AhQc
    手牌: 胜率=8.475%, 平局率=5.085%
    范围: 胜率=39.917%, 平局率=1.638%
  场景 2: 7h 2d Kh Ac 3d + 6c6d
    手牌: 胜率=27.136%, 平局率=0.503%
    范围: 胜率=43.136%, 平局率=1.271%
  场景 3: Kd Js 2d 5h Td + TcTh
    手牌: 胜率=79.487%, 平局率=0.000%
    范围: 胜率=40.142%, 平局率=1.126%
  场景 4: Ac 3s Jc 6s As + KcJs
    手牌: 胜率=55.215%, 平局率=3.681%
    范围: 胜率=41.753%, 平局率=0.952%
  场景 5: 3d 4d 9d 5d Jh + AdQs
    手牌: 胜率=99.474%, 平局率=0.000%
    范围: 胜率=45.214%, 平局率=0.447%
  场景 6: Th Td 4s 3d Ad + 2c2d
    手牌: 胜率=31.884%, 平局率=0.483%
    范围: 胜率=47.378%, 平局率=1.260%
  场景 7: 4h 7h 9s 3c Ts + KdQs
    手牌: 胜率=11.881%, 平局率=4.455%
    范围: 胜率=48.333%, 平局率=1.249%
  场景 8: Ah Ad 9h 9s 5c + 7h7s
    手牌: 胜率=14.835%, 平局率=1.648%
    范围: 胜率=45.359%, 平局率=8.775%
  场景 9: Ad Ks 4h Jc 6c + AhKc
    手牌: 胜率=88.272%, 平局率=2.469%
    范围: 胜率=45.743%, 平局率=1.095%
  场景 10: 6d 6c Ah Ac As + QcJc
    手牌: 胜率=0.000%, 平局率=61.589%
    范围: 胜率=20.849%, 平局率=46.593%
进度: 100/10000 - 已用时: 3s - 预计剩余: 337s
进度: 200/10000 - 已用时: 7s - 预计剩余: 336s
进度: 300/10000 - 已用时: 10s - 预计剩余: 326s
进度: 400/10000 - 已用时: 13s - 预计剩余: 320s
进度: 500/10000 - 已用时: 17s - 预计剩余: 318s
进度: 600/10000 - 已用时: 20s - 预计剩余: 314s
进度: 700/10000 - 已用时: 23s - 预计剩余: 309s
进度: 800/10000 - 已用时: 26s - 预计剩余: 304s
进度: 900/10000 - 已用时: 30s - 预计剩余: 300s
进度: 1000/10000 - 已用时: 33s - 预计剩余: 297s
进度: 1100/10000 - 已用时: 36s - 预计剩余: 295s
进度: 1200/10000 - 已用时: 40s - 预计剩余: 292s
进度: 1300/10000 - 已用时: 43s - 预计剩余: 288s
进度: 1400/10000 - 已用时: 46s - 预计剩余: 285s
进度: 1500/10000 - 已用时: 50s - 预计剩余: 282s
进度: 1600/10000 - 已用时: 53s - 预计剩余: 279s
进度: 1700/10000 - 已用时: 56s - 预计剩余: 275s
进度: 1800/10000 - 已用时: 59s - 预计剩余: 270s
进度: 1900/10000 - 已用时: 62s - 预计剩余: 266s
进度: 2000/10000 - 已用时: 66s - 预计剩余: 263s
进度: 2100/10000 - 已用时: 69s - 预计剩余: 260s
进度: 2200/10000 - 已用时: 72s - 预计剩余: 256s
进度: 2300/10000 - 已用时: 76s - 预计剩余: 253s
进度: 2400/10000 - 已用时: 79s - 预计剩余: 251s
进度: 2500/10000 - 已用时: 83s - 预计剩余: 248s
进度: 2600/10000 - 已用时: 86s - 预计剩余: 245s
进度: 2700/10000 - 已用时: 89s - 预计剩余: 241s
进度: 2800/10000 - 已用时: 93s - 预计剩余: 238s
进度: 2900/10000 - 已用时: 96s - 预计剩余: 235s
进度: 3000/10000 - 已用时: 99s - 预计剩余: 232s
进度: 3100/10000 - 已用时: 103s - 预计剩余: 228s
进度: 3200/10000 - 已用时: 106s - 预计剩余: 225s
进度: 3300/10000 - 已用时: 109s - 预计剩余: 222s
进度: 3400/10000 - 已用时: 112s - 预计剩余: 218s
进度: 3500/10000 - 已用时: 116s - 预计剩余: 215s
进度: 3600/10000 - 已用时: 119s - 预计剩余: 212s
进度: 3700/10000 - 已用时: 122s - 预计剩余: 208s
进度: 3800/10000 - 已用时: 126s - 预计剩余: 205s
进度: 3900/10000 - 已用时: 129s - 预计剩余: 202s
进度: 4000/10000 - 已用时: 133s - 预计剩余: 199s
进度: 4100/10000 - 已用时: 136s - 预计剩余: 196s
进度: 4200/10000 - 已用时: 139s - 预计剩余: 192s
进度: 4300/10000 - 已用时: 143s - 预计剩余: 189s
进度: 4400/10000 - 已用时: 146s - 预计剩余: 186s
进度: 4500/10000 - 已用时: 149s - 预计剩余: 182s
进度: 4600/10000 - 已用时: 152s - 预计剩余: 179s
进度: 4700/10000 - 已用时: 156s - 预计剩余: 176s
进度: 4800/10000 - 已用时: 159s - 预计剩余: 172s
进度: 4900/10000 - 已用时: 162s - 预计剩余: 169s
进度: 5000/10000 - 已用时: 166s - 预计剩余: 166s
进度: 5100/10000 - 已用时: 169s - 预计剩余: 162s
进度: 5200/10000 - 已用时: 172s - 预计剩余: 159s
进度: 5300/10000 - 已用时: 176s - 预计剩余: 156s
进度: 5400/10000 - 已用时: 179s - 预计剩余: 153s
进度: 5500/10000 - 已用时: 182s - 预计剩余: 149s
进度: 5600/10000 - 已用时: 185s - 预计剩余: 146s
进度: 5700/10000 - 已用时: 189s - 预计剩余: 142s
进度: 5800/10000 - 已用时: 192s - 预计剩余: 139s
进度: 5900/10000 - 已用时: 195s - 预计剩余: 136s
进度: 6000/10000 - 已用时: 199s - 预计剩余: 132s
进度: 6100/10000 - 已用时: 202s - 预计剩余: 129s
进度: 6200/10000 - 已用时: 205s - 预计剩余: 126s
进度: 6300/10000 - 已用时: 209s - 预计剩余: 123s
进度: 6400/10000 - 已用时: 212s - 预计剩余: 119s
进度: 6500/10000 - 已用时: 215s - 预计剩余: 116s
进度: 6600/10000 - 已用时: 219s - 预计剩余: 113s
进度: 6700/10000 - 已用时: 222s - 预计剩余: 109s
进度: 6800/10000 - 已用时: 225s - 预计剩余: 106s
进度: 6900/10000 - 已用时: 229s - 预计剩余: 103s
进度: 7000/10000 - 已用时: 232s - 预计剩余: 99s
进度: 7100/10000 - 已用时: 235s - 预计剩余: 96s
进度: 7200/10000 - 已用时: 238s - 预计剩余: 93s
进度: 7300/10000 - 已用时: 242s - 预计剩余: 89s
进度: 7400/10000 - 已用时: 245s - 预计剩余: 86s
进度: 7500/10000 - 已用时: 248s - 预计剩余: 83s
进度: 7600/10000 - 已用时: 251s - 预计剩余: 79s
进度: 7700/10000 - 已用时: 255s - 预计剩余: 76s
进度: 7800/10000 - 已用时: 258s - 预计剩余: 73s
进度: 7900/10000 - 已用时: 261s - 预计剩余: 70s
进度: 8000/10000 - 已用时: 265s - 预计剩余: 66s
进度: 8100/10000 - 已用时: 269s - 预计剩余: 63s
进度: 8200/10000 - 已用时: 272s - 预计剩余: 60s
进度: 8300/10000 - 已用时: 275s - 预计剩余: 56s
进度: 8400/10000 - 已用时: 279s - 预计剩余: 53s
进度: 8500/10000 - 已用时: 282s - 预计剩余: 50s
进度: 8600/10000 - 已用时: 285s - 预计剩余: 46s
进度: 8700/10000 - 已用时: 288s - 预计剩余: 43s
进度: 8800/10000 - 已用时: 292s - 预计剩余: 40s
进度: 8900/10000 - 已用时: 295s - 预计剩余: 36s
进度: 9000/10000 - 已用时: 298s - 预计剩余: 33s
进度: 9100/10000 - 已用时: 301s - 预计剩余: 30s
进度: 9200/10000 - 已用时: 305s - 预计剩余: 26s
进度: 9300/10000 - 已用时: 308s - 预计剩余: 23s
进度: 9400/10000 - 已用时: 311s - 预计剩余: 20s
进度: 9500/10000 - 已用时: 315s - 预计剩余: 17s
进度: 9600/10000 - 已用时: 318s - 预计剩余: 13s
进度: 9700/10000 - 已用时: 321s - 预计剩余: 10s
进度: 9800/10000 - 已用时: 324s - 预计剩余: 7s
进度: 9900/10000 - 已用时: 328s - 预计剩余: 3s
进度: 10000/10000 - 已用时: 331s - 预计剩余: 0s


成功生成 10000 个场景，总用时: 331.3s

================================================================================
分析结果：寻找四维度胜率相近的场景对（阈值: 0.05%）
条件：手牌胜率、手牌平局率、范围胜率、范围平局率 都相差不超过0.05%
================================================================================

找到 118 对四维度胜率相近的场景
其中策略差异显著(>15%)的: 8 对

【策略差异显著的反例】

──────────────────────────────────────────────────────────────────────
【场景1】 4s 8c Kc 2d 7d + QcQd
  手牌: 胜率=67.677%, 平局率=0.505%
  范围: 胜率=40.663%, 平局率=1.277%
  策略: {"Check":0.24934,"Bet":0.75066}
【场景2】 3c Kd 5d 4c 5h + QdQh
  手牌: 胜率=67.662%, 平局率=0.498%
  范围: 胜率=40.653%, 平局率=1.273%
  策略: {"Check":0.761804,"Bet":0.238196}
【对比】 策略差异: 51.2%

──────────────────────────────────────────────────────────────────────
【场景1】 6c Js 5s Kd 2d + JdJh
  手牌: 胜率=98.413%, 平局率=0.000%
  范围: 胜率=40.012%, 平局率=1.435%
  策略: {"Check":0.991371,"Bet":0.008629}
【场景2】 3s 5d 8c Qc Kd + QhQs
  手牌: 胜率=98.413%, 平局率=0.000%
  范围: 胜率=40.009%, 平局率=1.479%
  策略: {"Check":0.394055,"Bet":0.605945}
【对比】 策略差异: 59.7%

──────────────────────────────────────────────────────────────────────
【场景1】 2s 8c Kc 3s 6d + JdJs
  手牌: 胜率=67.677%, 平局率=0.505%
  范围: 胜率=40.677%, 平局率=1.252%
  策略: {"Check":0.387219,"Bet":0.612781}
【场景2】 3c Kd 5d 4c 5h + QdQh
  手牌: 胜率=67.662%, 平局率=0.498%
  范围: 胜率=40.653%, 平局率=1.273%
  策略: {"Check":0.761804,"Bet":0.238196}
【对比】 策略差异: 37.5%

──────────────────────────────────────────────────────────────────────
【场景1】 7h 5s 9c Qc Tc + AcAh
  手牌: 胜率=74.713%, 平局率=0.575%
  范围: 胜率=45.910%, 平局率=1.193%
  策略: {"Check":0.034143,"Bet":0.965857}
【场景2】 4h 8c 8d Th 9h + AdAs
  手牌: 胜率=74.725%, 平局率=0.549%
  范围: 胜率=45.930%, 平局率=1.175%
  策略: {"Check":1,"Bet":0}
【对比】 策略差异: 96.6%

──────────────────────────────────────────────────────────────────────
【场景1】 4d 4h Qh 5d 8c + Tc9c
  手牌: 胜率=0.000%, 平局率=1.408%
  范围: 胜率=40.068%, 平局率=2.144%
  策略: {"Check":0.794661,"Bet":0.205339}
【场景2】 Qc 3s 6s 8c 6d + Th9h
  手牌: 胜率=0.000%, 平局率=1.435%
  范围: 胜率=40.057%, 平局率=2.191%
  策略: {"Check":0.492984,"Bet":0.507016}
【对比】 策略差异: 30.2%

──────────────────────────────────────────────────────────────────────
【场景1】 As 2c 7s Ad Kc + KhKs
  手牌: 胜率=96.296%, 平局率=0.000%
  范围: 胜率=40.592%, 平局率=1.413%
  策略: {"Check":1,"Bet":0}
【场景2】 3c Qh 5c 8h Js + JcJh
  手牌: 胜率=96.296%, 平局率=0.000%
  范围: 胜率=40.554%, 平局率=1.439%
  策略: {"Check":0.55756,"Bet":0.44244}
【对比】 策略差异: 44.2%

──────────────────────────────────────────────────────────────────────
【场景1】 4h 4d Qs 3h 6s + 9s8s
  手牌: 胜率=1.370%, 平局率=1.370%
  范围: 胜率=41.537%, 平局率=1.594%
  策略: {"Check":0.685515,"Bet":0.314485}
【场景2】 6s Kc 3s 3c 4d + 9h8h
  手牌: 胜率=1.376%, 平局率=1.376%
  范围: 胜率=41.542%, 平局率=1.605%
  策略: {"Check":0.330121,"Bet":0.669879}
【对比】 策略差异: 35.5%

──────────────────────────────────────────────────────────────────────
【场景1】 2s Jh 6c 7c 2c + JcJs
  手牌: 胜率=99.500%, 平局率=0.000%
  范围: 胜率=39.319%, 平局率=1.453%
  策略: {"Check":0,"Bet":1}
【场景2】 3h 6h Kd 2d Kc + 6c6d
  手牌: 胜率=99.524%, 平局率=0.000%
  范围: 胜率=39.333%, 平局率=1.420%
  策略: {"Check":0.343405,"Bet":0.656595}
【对比】 策略差异: 34.3%

结果已保存到: experiments/results/wasm_postflop_validation_v3.json
报告已保存到: experiments/results/wasm_postflop_validation_v3_report.md
Waiting for the debugger to disconnect...
