---
inclusion: always
---

# 文档优先工作流规则

## 核心原则

在执行任何新的开发任务之前，必须先更新相关的文档和任务列表。这确保了：
- 需求和设计始终与实现保持同步
- 任务进度可追踪
- 团队成员可以了解最新的项目状态

## 工作流程

### 1. 接收新任务时

当收到新的功能需求或bug修复请求时，按以下顺序执行：

1. **更新需求文档** (`requirements.md`)
   - 添加新的用户故事（如果适用）
   - 添加或修改验收标准
   - 使用EARS模式编写需求

2. **更新设计文档** (`design.md`)
   - 描述技术方案
   - 更新架构图（如果需要）
   - 添加新的正确性属性（如果适用）

3. **更新任务列表** (`tasks.md`)
   - 添加新的实现任务
   - 标记任务依赖关系
   - 估算任务复杂度

4. **执行实现任务**
   - 按任务列表顺序实现
   - 完成后更新任务状态

### 2. 修改现有功能时

1. 先查看现有的需求和设计文档
2. 更新受影响的文档部分
3. 在任务列表中添加修改任务
4. 执行修改

### 3. 修复Bug时

1. 在任务列表中记录bug描述
2. 分析是否需要更新设计文档
3. 执行修复
4. 更新任务状态

## 文档位置

- 需求文档：`.kiro/specs/{feature_name}/requirements.md`
- 设计文档：`.kiro/specs/{feature_name}/design.md`
- 任务列表：`.kiro/specs/{feature_name}/tasks.md`

## 例外情况

以下情况可以跳过文档更新：
- 紧急的生产环境bug修复（但事后必须补充文档）
- 纯粹的代码重构（不改变功能行为）
- 简单的typo修复
