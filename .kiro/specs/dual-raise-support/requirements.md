# 双加注大小支持需求文档

## 概述

当前模型只支持单一的 RAISE 动作，需要扩展为支持两种加注大小：
- RAISE_SMALL（小加注）：半底池加注
- RAISE_BIG（大加注）：全底池加注

## 用户故事

### US-1: 作为训练系统，我需要能够区分两种加注大小
**验收标准：**
- 神经网络输出 5 个动作的概率/遗憾值（FOLD, CHECK, CALL, RAISE_SMALL, RAISE_BIG）
- 训练时能够正确计算两种加注的遗憾值
- 策略缓冲区存储 5 维策略向量

### US-2: 作为游戏环境，我需要生成两种加注动作
**验收标准：**
- `get_legal_actions()` 返回 RAISE_SMALL 和 RAISE_BIG 两种加注选项
- RAISE_SMALL 金额 = 跟注金额 + 底池的一半
- RAISE_BIG 金额 = 跟注金额 + 底池
- 底池计算规则：下注相等时为当前底池；下注不等时先加上跟注金额再计算

### US-3: 作为策略查看器，我需要显示两种加注的独立概率
**验收标准：**
- 策略热图显示 5 种动作的概率
- 遗憾值热图显示 5 种动作的遗憾值
- 两种加注显示不同的概率值（不再是 50/50 分割）

## 技术约束

1. 现有检查点将不兼容，需要重新训练
2. 需要保持向后兼容性，能够加载旧格式检查点（4 动作）
3. 动作索引映射：
   - 0: FOLD
   - 1: CHECK
   - 2: CALL
   - 3: RAISE_SMALL
   - 4: RAISE_BIG

## 底池计算规则

根据用户说明：
- 当下注相等时：底池 = 当前底池
- 当下注不等时：先加上跟注金额，然后计算底池大小

示例：
- 底池 100，双方下注相等 → 半底池加注 = 50，全底池加注 = 100
- 底池 100，对手下注 50，我下注 0 → 跟注后底池 = 150 → 半底池加注 = 50 + 75 = 125，全底池加注 = 50 + 150 = 200
